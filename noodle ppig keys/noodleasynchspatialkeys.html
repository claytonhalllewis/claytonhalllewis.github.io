<html>
<head>
<title>Noodle</title>
<style type="text/css">  
      	#canvas_container 
	{  
      	width: 500px;  
      	border: 1px solid #aaa;  
        }  
	#workspace_container_container,#palette_container
	{
	float:left;
	}

</style>
<script src="speakWorker.js"></script>
<script src="speakClient.js"></script>
<script src='https://cdn.firebase.com/js/client/1.0.11/firebase.js'></script>
</head>

<body>
<div id="audio"></div>
<script>
var fb = new Firebase('https://popping-fire-7258.firebaseio.com/');
function save()
{
      var dictNewStart=headings[headings.length-1].start;
      console.log("dictNewStart is "+dictNewStart);
      var dictNew=buildNew(dict,dictNewStart);
      fb.set(dictNew);
}
function buildNew(dict,dictNewStart)
{
       var dictPos=0;
	var dictNew={};
	for(var sel in dict)
	{ 
		if (dictPos>=dictNewStart)
		{
			dictNew[sel]=dict[sel];
			dictPos=dictPos+1;
		}
	}
	console.log(dictNew);
	return dictNew;
}
function load()
{
      var dictNew;
      
      fb.once('value',
      function(snapshot){dictNew=snapshot.val();
                         var dictNewCount=0;
                         for(var sel in dictNew)
                         {
		            dict[sel]=dictNew[sel];
		            dictNewCount=dictNewCount+1;
                         }
                         headings[headings.length-1]["length"]=dictNewCount;
                         }
      );
}
var speakfn=function(s)
    {
        speak(s);
}
//alert("ready");
//speakfn("eureka");
</script>
<div id="keydiv">

<canvas id="theCanvasID" width="150" height="150">  </canvas>
<input type="button" value="Save" onClick="save();">
<input type="button" value="load" onClick="load();">
<input type="text" value="output" id="outputBox">
<div id="palette_container"></div>
<div id="workspace_container_container"></div>
</div>

<script src="nonvisualspatialized.js"></script>
<script src="noodlesound.js"></script>
<script src="colorsetc.js"></script>
<script src="noodleshapes.js"></script>
<script src="noodlebaseasynch.js"></script>
<script type="text/javascript" src="raphael-min.js"></script>  
<script type="text/javascript" src="myRaphaelScript.js"></script>  
  
      
</body>
</html>